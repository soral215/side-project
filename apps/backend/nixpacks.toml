[phases.setup]
nixPkgs = ["nodejs-18_x", "pnpm"]

[phases.install]
cmds = ["pnpm install"]

[phases.build]
cmds = [
  "cd apps/backend && prisma generate",
  "pnpm --filter @side-project/backend build",
  "ls -la apps/backend/dist/ || echo 'dist directory check'"
]

[start]
cmd = "cd apps/backend && node dist/server.js"
